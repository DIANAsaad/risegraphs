<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Double Y-Axis Operator Graph</title>

    <!-- Plotly CDN -->
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>

    <style>
      body {
        margin: 0;
        font-family: Arial, sans-serif;
        background: #FFECE6;
      }

      #wrapper {
        display: flex;
        align-items: flex-start;
        gap: 20px;
        padding: 10px;
      }

      #chart {
        width: 70%;
        height: 700px;
      }

      #note {
        width: 30%;
        padding: 12px 14px;
        font-size: 14px;
        color: black;
        line-height: 1.4;
      }

      /* NEW: Mobile layout — stack note under chart */
      @media (max-width: 768px) {
        #wrapper {
          flex-direction: column;
        }

        #chart {
          width: 100%;
          height: 520px;
        }

        #note {
          width: 100%;
        }
      }
    </style>
  </head>
  <body>
    <div id="wrapper">
      <div id="chart"></div>

      <div id="note">
        <b>Notes on Graph</b><br /><br />
        This graph uses a <b>double Y-axis</b> to display two different data
        sets with different units and scales.<br /><br />
        <b>1. </b>Hover or click a point to view its value on the correct Y-axis.<br /><br />
        <b>2. </b>To hide one of graphs, click on its <b>label</b> right below the graph.<br /><br />
        <b>3. </b>Zoom in by clicking and dragging a box around the area of interest.<br /><br />
        <b>4. </b>Reset the zoom by double-clicking anywhere on the graph. <br><br />
        You can also use the toolbar at the top-right of the graph.
      </div>
    </div>

    <script>
      /* ---------------- DATA ---------------- */

      const days = [1, 2, 3, 4, 5, 6];

      // LEFT Y-axis (Effluent quality)
      const effluentTSS = [150, 120, 110, 100, 90, 80, 70];

      // RIGHT Y-axis (Chemical dose)
      const chemicalDose = [0, 5, 10, 13, 15, 18, 20];

      /* ---------------- TRACES ---------------- */

      const tssTrace = {
        x: days,
        y: effluentTSS,
        name: "Effluent TSS (mg/L)",
        yaxis: "y",
        type: "scatter",
        mode: "lines+markers",
        line: { color: "black" },
        hovertemplate:
          "<b>Effluent TSS</b><br>" +
          "Day: %{x}<br>" +
          "TSS: %{y} mg/L<extra></extra>",
      };

      const doseTrace = {
        x: days,
        y: chemicalDose,
        name: "Chemical Dose (mg/L)",
        yaxis: "y2",
        type: "scatter",
        mode: "lines+markers",
        line: { color: "#ff4500" },
        hovertemplate:
          "<b>Chemical Dose</b><br>" +
          "Day: %{x}<br>" +
          "Dose: %{y} mg/L<extra></extra>",
      };

      /* ---------------- LAYOUT ---------------- */

      const layout = {
        plot_bgcolor: "#FFECE6",
        paper_bgcolor: "#FFECE6",
        title: {
          text: "<b>Chemical Dose vs Effluent TSS (Double Y-Axis)</b>",
          font: { color: "black" },
        },

        margin: { l: 80, r: 80, t: 60, b: 70 },
        font: { color: "black" },

        xaxis: {
          title: "Time (Days)",
          dtick: 1,
          zeroline: false,
          showline: true,
          linewidth: 2,
        },

        /* LEFT AXIS — OWNS GRID */
        yaxis: {
          title: "Effluent TSS (mg/L)",
          range: [0, 170],
          dtick: 10,
          showgrid: false,
          gridcolor: "rgba(0,0,0,0.15)",
          zeroline: false,
          showline: true,
          linewidth: 2,
        },

        /* RIGHT AXIS — NO GRID */
        yaxis2: {
          title: "Chemical Dose (mg/L)",
          range: [0, 20],
          dtick: 5,
          overlaying: "y",
          side: "right",
          showgrid: false,
          zeroline: false,
          showline: true,
          linewidth: 2,
        },

        legend: {
          orientation: "h",
          xanchor: "left",
          yanchor: "middle",
          x: 0.22,
          y: -0.22,
          font: { size: 12, color: "black" }
        },

        hovermode: "closest",
      };

      /* ---------------- CONFIG ---------------- */

      const config = {
        responsive: true,
        displayModeBar: true,
        modeBarButtonsToRemove: [
          "toImage",
          "select2d",
          "lasso2d",
          "autoScale2d",
          "toggleSpikelines",
        ],
      };

      Plotly.newPlot("chart", [tssTrace, doseTrace], layout, config);
    </script>
  </body>
</html>
