<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Interactive Table with Legends</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 10px;
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        margin-top: 3rem;
      }
      p {
        text-align: center; /* Centers the paragraph */
        width: 100%; /* Ensures it takes the full width of the container */
      }

      table {
        width: 90%; /* Increased width */
        border-collapse: collapse;
        margin: 0 auto;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        padding: 20px;
      }

      td,
      th {
        border: 2px solid #ffefe9;
        padding: 30px; /* Increased padding */
        text-align: center;
        white-space: nowrap; /* Prevents the content from wrapping to the next line */
      }

      /* Custom header class */
      .header-cstm {
        background-color: #ff4500;
        color: white;
        padding: 30px; /* Increased padding */
      }

      .header-cstm:hover {
        background-color: #ff4550;
      }

      /* Hover effect for rows */
      tr:hover {
        background-color: #ffece6;
      }

      /* Add hover effect for columns */
      td.column-hovered,
      th.column-hovered {
        background-color: #ff9287;
        color: white; /* Highlight color for columns */
      }

      /* Tooltip style for legends */
      .tooltip {
        display: none;
        position: absolute;
        background-color: #8da2db;
        color: white;
        padding: 8px;
        border-radius: 4px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        font-size: 14px;
        max-width: 200px;
        pointer-events: none;
      }

      /* Explanations (Legend) style */
      .legend-container {
        width: 40%;
        padding: 20px;
      }

      .legend-container h3 {
        text-align: center;
        margin-bottom: 20px;
      }

      .legend-item {
        margin: 10px 0;
        font-size: 16px;
      }

      .legend-item span {
        padding: 6px 12px;
        border-radius: 4px;
        display: inline-block;
      }

      .header-legend {
        background-color: #ff4500;
        color: white;
      }

      .cell-legend {
        background-color: purple;
        color: white;
      }
      .row-legend {
        background-color: #ffece6;
      }

      .column-legend {
        background-color: #ff9287;
        color: white;
      }

      /* Responsive Design (keeps SAME padding everywhere; no per-breakpoint padding changes) */
      @media (max-width: 900px) {
        table {
          width: 100%;
          max-width: 100%;
          table-layout: fixed; /* forces columns to fit within available width */
        }

        /* Keep exact same padding (30px) by NOT overriding padding here */
        td,
        th {
          white-space: normal !important; /* allow wrapping so it can shrink */
          overflow-wrap: anywhere;
          word-break: break-word;
        }

        .legend-container {
          width: 90%;
          margin-top: 20px;
        }
      }
      /* MOBILE PORTRAIT â€“ allow horizontal scroll for readability */
      @media (max-width: 450px) {
        .table-container {
          overflow-x: auto;
          -webkit-overflow-scrolling: touch;
        }

        table {
          min-width: 600px; /* forces scroll instead of ugly wrapping */
        }

        td,
        th {
          white-space: nowrap !important; /* stop letter-by-letter wrapping */
        }
      }
    </style>
  </head>
  <body>
    <div class="table-container">
      <p>Hover over the cells, rows, or columns to see legends.</p>

      <table>
        <thead>
          <tr>
            <th class="header-cstm">Date</th>
            <th class="header-cstm">Flow (gpm)</th>
            <th class="header-cstm">BOD (mg/L)</th>
            <th class="header-cstm">TSS (mg/L)</th>
          </tr>
        </thead>
        <tbody>
          <tr data-legend="Date of measurement.">
            <td data-legend="Date of measurement.">01/01/2026</td>
            <td
              data-legend="Flow rate in gallons per minute on 01/01/2026 was 450."
            >
              450
            </td>
            <td data-legend="Biochemical oxygen demand on 01/01/2026 was 180.">
              180
            </td>
            <td
              data-legend="Total suspended solids in milligrams per liter on 01/01/2026 was 210."
            >
              210
            </td>
          </tr>
          <tr data-legend="Date of measurement.">
            <td data-legend="Date of measurement.">02/01/2026</td>
            <td
              data-legend="Flow rate in gallons per minute on 02/01/2026 was 480."
            >
              480
            </td>
            <td data-legend="Biochemical oxygen demand on 02/01/2026 was 175.">
              175
            </td>
            <td
              data-legend="Total suspended solids in milligrams per liter on 02/01/2026 was 230."
            >
              230
            </td>
          </tr>
          <tr data-legend="Date of measurement.">
            <td data-legend="Date of measurement.">03/01/2026</td>
            <td
              data-legend="Flow rate in gallons per minute on 03/01/2026 was 460."
            >
              460
            </td>
            <td data-legend="Biochemical oxygen demand on 03/01/2026 was 190.">
              190
            </td>
            <td
              data-legend="Total suspended solids in milligrams per liter on 03/01/2026 was 220."
            >
              220
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="legend-container">
      <h3>Table Legend</h3>
      <div class="legend-item">
        <span class="header-legend">Header</span> The first row of the table
        contains the header, which represents the name of each column (e.g.,
        Date, Flow, BOD, TSS).
      </div>
      <div class="legend-item">
        <span class="cell-legend">Cell</span> Each individual cell represents a
        single data point in the table, such as the specific Flow, BOD, or TSS
        value for a given date.
      </div>
      <div class="legend-item">
        <span class="column-legend">Column</span> A column groups all the values
        of the same parameter (e.g., all Flow rates for different dates).
        Columns are highlighted when hovered.
      </div>
      <div class="legend-item">
        <span class="row-legend">Row</span> A row groups all the values of
        parameters for a specific date. Rows are highlighted when hovered.
      </div>
    </div>

    <div class="tooltip" id="tooltip"></div>

    <script>
      // JavaScript to show the tooltip and highlight only the specific cell on hover
      const cells = document.querySelectorAll(
        "td[data-legend], tr[data-legend], th"
      );

      cells.forEach((cell) => {
        cell.addEventListener("mouseover", function (e) {
          const tooltip = document.getElementById("tooltip");
          tooltip.textContent = e.target.getAttribute("data-legend");

          // Apply tooltip only if the cell is not inside a header
          if (!cell.closest("th")) {
            tooltip.style.display = "block";
            tooltip.style.left = e.pageX + "px";
            tooltip.style.top = e.pageY + 20 + "px";
          }

          // Highlight the individual cell
          if (e.target.tagName.toLowerCase() === "td") {
            // Only highlight cell, not the header
            e.target.style.backgroundColor = "purple"; // Highlight the cell when hovered
          }

          // Highlight the column for column hover (optional, can be removed if not needed)
          if (e.target.cellIndex !== undefined) {
            const columnIndex = e.target.cellIndex;
            const columns = document.querySelectorAll(
              `td:nth-child(${columnIndex + 1}), th:nth-child(${
                columnIndex + 1
              })`
            );

            columns.forEach((col) => {
              col.classList.add("column-hovered");
            });
          }

          cell.addEventListener("mouseout", function () {
            // Hide the tooltip
            const tooltip = document.getElementById("tooltip");
            tooltip.style.display = "none";

            // Remove the column highlight (optional, can be removed if not needed)
            const highlightedColumns =
              document.querySelectorAll(".column-hovered");
            highlightedColumns.forEach((col) => {
              col.classList.remove("column-hovered");
            });

            // Reset the background color of the cell when mouse leaves
            if (e.target.tagName.toLowerCase() === "td") {
              e.target.style.backgroundColor = ""; // Reset cell background color when hover ends
            }
          });
        });
      });
    </script>
  </body>
</html>
